---
description: Auto-configure GitHub Project board
# GitHub: Prefer gh CLI; fallback to GitHub MCP if gh unavailable
scripts:
  sh: .specify/scripts/bash/jcttech/project-setup.sh --json --deploy-workflows
  ps: .specify/scripts/powershell/check-prerequisites.ps1 -Json -PathsOnly
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## Overview

This command sets up or configures a GitHub Project board for spec-driven development. It creates:

- **Status columns**: Inbox, Triaged, Planned, In Progress, In Review, Done
- **Custom fields**: Type, Area, Effort, Priority
- **Configuration files**: Saves project settings for other commands to use

## Outline

1. **Parse user input** for:
   - Existing project number/URL to configure
   - New project name to create
   - Organization name (for org projects)

2. **Check for existing configuration**:
   ```bash
   cat .specify/config.yml
   ```

   If project already configured, ask:
   - Update existing project?
   - Configure a different project?

3. **Verify Git remote** and determine owner:
   ```bash
   git config --get remote.origin.url
   ```

   Extract owner (user or org) for project creation.

   > [!CAUTION]
   > ONLY PROCEED IF THE REMOTE IS A GITHUB URL

4. **Create or get project**:

   If creating new:
   ```bash
   gh project create --owner {owner} --title "{project_name}"
   ```

   If using existing:
   ```bash
   gh project list --owner {owner} --format json
   ```

5. **Configure Status field** with columns:

   The Status field is a single-select field with these options:
   - `Inbox` - New items, uncategorized
   - `Triaged` - Reviewed, effort/priority set
   - `Planned` - Scheduled for implementation
   - `In Progress` - Currently being worked on
   - `In Review` - PR submitted, awaiting review
   - `Done` - Completed

   Use GraphQL to add/update field options:
   ```bash
   {SCRIPT} --add-status-options
   ```

6. **Create custom fields**:

   **Type** (single-select):
   - Epic, Spec, Story, Task, Bug, Idea

   **Area** (single-select):
   - architecture, tech-debt, enhancement, performance, security, ux, other

   **Effort** (single-select):
   - XS, S, M, L, XL

   **Priority** (single-select):
   - Critical, High, Medium, Low

   ```bash
   {SCRIPT} --create-fields
   ```

7. **Link repository** to project:
   ```bash
   gh project link {project_number} --owner {owner} --repo {repo}
   ```

8. **Save configuration** to `.specify/config.yml`:
   ```yaml
   github:
     project: "PROJECT_NUMBER"
     owner: "OWNER_NAME"
     owner_type: "user|organization"
   ```

9. **Save field IDs** to `.specify/project-fields.yml`:
   ```yaml
   # Auto-generated by /jcttech.setup-project
   # Do not edit manually
   project_id: "PROJECT_NODE_ID"
   fields:
     status:
       id: "FIELD_ID"
       options:
         inbox: "OPTION_ID"
         triaged: "OPTION_ID"
         planned: "OPTION_ID"
         in_progress: "OPTION_ID"
         in_review: "OPTION_ID"
         done: "OPTION_ID"
     type:
       id: "FIELD_ID"
       options:
         epic: "OPTION_ID"
         spec: "OPTION_ID"
         story: "OPTION_ID"
         task: "OPTION_ID"
         bug: "OPTION_ID"
         idea: "OPTION_ID"
     area:
       id: "FIELD_ID"
       options:
         architecture: "OPTION_ID"
         tech-debt: "OPTION_ID"
         enhancement: "OPTION_ID"
         performance: "OPTION_ID"
         security: "OPTION_ID"
         ux: "OPTION_ID"
         other: "OPTION_ID"
     effort:
       id: "FIELD_ID"
       options:
         xs: "OPTION_ID"
         s: "OPTION_ID"
         m: "OPTION_ID"
         l: "OPTION_ID"
         xl: "OPTION_ID"
     priority:
       id: "FIELD_ID"
       options:
         critical: "OPTION_ID"
         high: "OPTION_ID"
         medium: "OPTION_ID"
         low: "OPTION_ID"
   ```

10. **Report success**:
    - Project URL
    - Configuration file locations
    - Next steps: "Use `/jcttech.epic` to create your first Epic"

## Project Board Structure

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        Project: {Project Name}                          │
├──────────┬──────────┬──────────┬────────────┬───────────┬──────────────┤
│  Inbox   │ Triaged  │ Planned  │ In Progress│ In Review │    Done      │
├──────────┼──────────┼──────────┼────────────┼───────────┼──────────────┤
│ Ideas    │ Ideas    │ Stories  │ Stories    │ Stories   │ All types    │
│ (new)    │ (effort/ │ (sprint  │ (WIP)      │ (PR open) │ (completed)  │
│          │ priority │ backlog) │            │           │              │
│          │ set)     │          │            │           │              │
└──────────┴──────────┴──────────┴────────────┴───────────┴──────────────┘
```

## Custom Field Reference

| Field | Type | Options | Purpose |
|-------|------|---------|---------|
| Status | Single-select | Inbox, Triaged, Planned, In Progress, In Review, Done | Workflow stage |
| Type | Single-select | Epic, Spec, Story, Task, Bug, Idea | Issue category |
| Area | Single-select | architecture, tech-debt, enhancement, performance, security, ux, other | Domain classification |
| Effort | Single-select | XS, S, M, L, XL | Size estimate |
| Priority | Single-select | Critical, High, Medium, Low | Importance |

## Example Interaction

```
User: /jcttech.setup-project

Claude: I'll set up a GitHub Project for spec-driven development.

Checking for existing configuration...
No project configured yet.

What would you like to do?
   [1] Create new project
   [2] Use existing project

User: 1

Claude: What should the project be named?

User: Development Roadmap

Claude: Setting up project...

Creating project: Development Roadmap
✓ Project created: https://github.com/users/owner/projects/5

Configuring Status field...
✓ Added: Inbox, Triaged, Planned, In Progress, In Review, Done

Creating custom fields...
✓ Created: Type (Epic, Spec, Story, Task, Bug, Idea)
✓ Created: Area (architecture, tech-debt, enhancement, etc.)
✓ Created: Effort (XS, S, M, L, XL)
✓ Created: Priority (Critical, High, Medium, Low)

Linking repository...
✓ Linked: owner/repo

Saving configuration...
✓ Saved: .specify/config.yml
✓ Saved: .specify/project-fields.yml

Project setup complete!
URL: https://github.com/users/owner/projects/5

Next steps:
1. Use `/jcttech.epic` to create your first Epic
2. Use `/jcttech.idea` to capture backlog items
3. Use `/jcttech.sync` to keep index updated
```

## Using Existing Project

```
/jcttech.setup-project --project 5
```

or

```
/jcttech.setup-project https://github.com/orgs/myorg/projects/5
```

This will:
- Use the existing project
- Add missing custom fields
- Update Status options if needed
- Save configuration locally

## Workflow Deployment

By default, this command deploys GitHub Actions workflows to automate spec-driven development:

- **cascade-close.yml**: Auto-closes parent Specs/Epics when all child issues are completed
- **idea-state-sync.yml**: Syncs Idea status based on Spec/Story lifecycle events

Workflows are deployed to `.github/workflows/` from `.specify/workflows/`.

To skip workflow deployment:
```bash
{SCRIPT} --project 5
```

Without the `--deploy-workflows` flag (which is included by default in this command).

## Notes

- **Organization projects**: Requires appropriate permissions on the org
- **User projects**: Works with personal repositories
- **Field IDs**: Cached locally for performance; re-run setup if fields change
- **Idempotent**: Safe to run multiple times; won't duplicate fields or workflows
